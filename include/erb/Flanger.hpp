/*****************************************************************************

      Flanger.hpp
      Copyright (c) 2023 Raphael DINGE

*Tab=3***********************************************************************/



#pragma once



/*\\\ INCLUDE FILES \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/



namespace erb
{



/*\\\ PUBLIC \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/

/*
==============================================================================
Name: ctor
==============================================================================
*/

Flanger::Flanger (size_t sample_rate)
{
   _impl.Init (float (sample_rate));
}


/*
==============================================================================
Name: operator ()
==============================================================================
*/

float Flanger::operator () (float x)
{
   return _impl.Process (x);
}



/*
==============================================================================
Name: operator ()
==============================================================================
*/

template <size_t size>
std::array <float, size>   Flanger::operator () (std::array <float, size> in)
{
   std::array <float, size> ret;
   for (size_t i = 0 ; i < size ; ++i)
   {
      ret [i] = _impl.Process (in [i]);
   }

   return ret;
}



/*\\\ INTERNAL \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/

/*
==============================================================================
Name: impl_set_feedback
==============================================================================
*/

void  Flanger::impl_set_feedback (float feedback)
{
   _impl.SetFeedback (feedback);
}



/*
==============================================================================
Name: impl_set_lfo_depth
==============================================================================
*/

void  Flanger::impl_set_lfo_depth (float depth)
{
   _impl.SetLfoDepth (depth);
}



/*
==============================================================================
Name: impl_set_lfo_frequency
==============================================================================
*/

void  Flanger::impl_set_lfo_frequency (float freq)
{
   _impl.SetLfoFreq (freq);
}



/*
==============================================================================
Name: impl_set_lfo_frequency
==============================================================================
*/

void  Flanger::impl_set_lfo_frequency (Frequency freq)
{
   _impl.SetLfoFreq (freq.value);
}



/*
==============================================================================
Name: impl_set_delay
==============================================================================
*/

void  Flanger::impl_set_delay (float delay_norm)
{
   _impl.SetDelay (delay_norm);
}



/*
==============================================================================
Name: impl_set_delay
==============================================================================
*/

void  Flanger::impl_set_delay (std::chrono::milliseconds delay_ms)
{
   _impl.SetDelayMs (delay_ms.count ());
}



/*\\\ PRIVATE \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/



}  // namespace erb



/*\\\ EOF \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/
